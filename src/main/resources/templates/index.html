<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
<meta name="description" content="">
<meta name="author" content="">

<title>Chicago Crime Places</title>

<link rel="stylesheet"
    href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
<link rel="stylesheet"
    href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">

<style>
#map {
    margin-top: 100px;
    width: 100%;
    height: 500px;
}
</style>

</head>

<body>

    <div class="jumbotron">
        <div class="container">
            <h1>Chicago Crime Places</h1>
            <p>This page marks different crime places in chicago from 2001 to
                present.</p>
        </div>
    </div>

    <div class="container">
        <form id="crimeFilter" action="filter">
            <div class="row">
                <div class="col-md-6">
                    <label for="fromYear">From Year:</label>
                    <select class="form-control" name="fromYear">
                        <option>2001</option>
                        <option>2015</option>
                    </select>
                </div>
                <div class="col-md-6">
                    <label for="toYear">To Year:</label>
                    <select class="form-control" name="toYear">
                        <option>2001</option>
                        <option>2015</option>
                    </select>
                </div>
            </div>
            <button type="submit" class="btn btn-primary btn-lg">Filter</button>
        </form>
    </div>


    <div class="container">

        <div class="row">
            <div class="col-md-12">
                <div id="map"></div>
            </div>
        </div>

    </div>
    <!-- /.container -->

    <script src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script
        src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

    <script>
        function initMap() {
          var map = new google.maps.Map(document.getElementById('map'), {
            zoom: 10,
            center: {lat: 41.9, lng: -87.6} // Chicago
          });

          setMarkers(map);
        }

        // Data for the markers consisting of a name, a LatLng and a zIndex for the
        // order in which these markers should display on top of each other.
        var crimes = [
          ['Foo',41.909605035, -87.747777145, 1],
          ['Foo',41.675427135, -87.63581257, 2],
          ['Foo',41.97779966, -87.683164484, 3],
          ['Foo',41.898177341, -87.71518334, 4],
          ['Foo',41.873510659, -87.720554136, 5],
          ['Foo',41.877809197, -87.761734553, 6],
          ['Foo',41.875843892, -87.748030348, 7]
        ];

        function setMarkers(map) {
          // Adds markers to the map.

          for (var i = 0; i < crimes.length; i++) {
            var crime = crimes[i];
            var marker = new google.maps.Marker({
              position: {lat: crime[1], lng: crime[2]},
              map: map,
              title: crime[0],
              zIndex: crime[3]
            });
          }
        }

        $("#crimeFilter").submit(function(e){
            e.preventDefault();
            var form = $("#crimeFilter");

            $.ajax({
                method: "GET",
                url: form.attr("action"),
                data: form.serialize()
              })
              .done(function(data) {
                    alert(1);
                    console.log(form.serialize());
                    console.log(data);
            });

          });
    </script>

    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCKXrDPEr4ktdybfaTYh4b7RiFwViehsm4&signed_in=true&callback=initMap"></script>
   </body>

</html>